# Gemma Journey - Sample Game using Gemma.cpp Unity Plugin

*Copyright 2025 Google LLC*

**Gemma Journey** is a sample game in which players solve a mystery by speaking with NPCs and unlock a vault in the center of the building by entering a secret phrase. Players will move between rooms in a building, speaking with NPCs and attempting to convince them to share a word only they know from the secret phrase. Once a player has collected all words in the phrase they can enter it in the vault to unlock it.

The unique aspect of this demo is that the NPCs' dialogue during interrogations is generated by Gemma in real-time, providing a dynamic and unpredictable conversational experience. It leverages the new [Gemma.cpp Unity plugin][gemma_plugin] featuring Gemma 3 model.


![cover](/ReadmeImages/cover.png)


For example, players can interact with Chef Gus, a highly-regarded and temperamental chef employed to cook for the wealthy owner of the estate and their guests. Gus is passionate and proud of his culinary skills. He can be easily offended by any perceived criticism of his cooking and is quick to anger, often expressing his frustration with dramatic flair. Gus's role and personality, along with game logic and rules, are defined in the Gemma 3 prompt, guiding his interactions and the riddle he presents to players in the game.

![chat_with_gus_image](/ReadmeImages/talk_with_gus.png)


The plugin is available at [gemma.cpp for Unity plugin][gemma_plugin].

See more at [blog][blog]

# How to Play

The player moves between rooms to talk to Android-themed NPCs that generate real-time dialogue from predefined character personalities. The goal is to interrogate each Android to discover a secret word, allowing progression to the next room.


## Download the Game

1.  Download the runnable game from [release][game_download].
2.  Extract the ZIP file.
3.  Double-click the **Gemma Quest** icon.

## Controls

* **WASD:** Movement
* **E:** Interact with NPCs

## Chat with NPCs

Players can type messages to the NPCs in the chat panel that appears upon interaction.

# Getting Started

This sample game targets Unity 6 (6000.0.33f1) and requires the [gemma.cpp for Unity plugin][gemma_plugin].

## Gemma Setup

1.  Open the `GemmaSettings` scriptable object in `Assets/ClueGame` or create one if it doesn't exist.
2.  Note the **Model Type** and **Weight format** in `GemmaSettings`.
3.  Go to [Kaggle][gemma_kaggle] to download the appropriate weights and tokenizer.
    * Example: If `ModelType` is `Gemma 3_4B` and `Weight format` is `sfp`, download the Gemma C++ variation `3.0-4b-it-sfp`.
4.  Place the downloaded files under `Assets/StreamingAssets/[folder name]`.

> For other variations, go to `Assets/ClueGame` and update the `GemmaSettings` scriptable object's Model type, weight format folder, and filename.

## How to Build the Game

To build a standalone runnable game for Windows:

1.  Open Build Profiles by clicking `File > Build Profile`.
2.  Click `Build`.

This sample uses `Assets/Scene/Clue/ClueScene.unity` as the base scene and loads each room as game progress. The scene sequence can be found in `ClueGameLifetimeScope` in `ClueScene`. The scenes listed in `ClueGameLifetimeScope` must exist in the build profile's scene list.

## Updating Prompts

### With Scriptable Objects

> Note: The prompts defined in scriptable objects will be override by content in the text file if exist.

This sample project uses three types of scriptable objects to handle prompt formatting:

1.  **NPC Global Setting:** Holds settings, instructions, and constraints that apply to all NPCs.

    ```
    // Example Global prompt prefix
    You are a character in a role-playing game. Review the following character description and reply to all subsequent prompts as though you are this character.
    ```

2.  **NPC General Setting:** Holds information general to a group of NPCs, such as roles, scenarios, and tasks.

    ```
    // Example formatted prompt
    ## Role and Task
    - Hold the secret word.
    - Guide players to the secret word through riddles, hints, and clues.
    - Identify if the player guesses the secret word correctly.
    ```

3.  **NPC Local Setting:** Holds specific NPC personality and information.

    ```
    You are Chef Gaston "Gus" Bouvier, a temperamental, proud chef.
    You eavesdrop on guests, especially if they criticize your cooking.
    You are passionate and proud of your culinary skills.
    ...
    ```

The created NPC global settings can be found at `Assets/ClueGame/npcGlobalSettings`. The other types are located under `Assets/Scripts/NPCs/Personality`.

> Note: The prompt will be formatted and sent to the Gemma model directly as a system prompt.

### With Text Files

Prompts can be read from `.txt` files under `Application.dataPath/Personality`. The first line of each file is the NPC's name, and the subsequent lines are read as the prompt.

> Note: Prompts read from these files will override all NPC settings provided by scriptable objects.
```
// Text file content example
Gus
You are Chef Gaston "Gus" Bouvier, a temperamental, proud chef.
You eavesdrop on guests, especially if they criticize your cooking.
You are passionate and proud of your culinary skills.
```

## Dependencies

* [UniTask - async/await integration for Unity](https://github.com/Cysharp/UniTask)
* [VContainer - dependency injection for Unity](https://vcontainer.hadashikick.jp/)
* [InControl - input mapping for controllers](https://www.gallantgames.com/pages/incontrol-introduction)

---
> This project is intended for demonstration purposes only. It is not
intended for use in a production environment.

[gemma_plugin]: https://github.com/google/gemma.cpp/tree/main
[blog]: https://ai.google.dev/gdc
[game_download]: <Your Game Download Link>
[gemma_kaggle]: https://www.kaggle.com/models/google/gemma/gemmaCpp

